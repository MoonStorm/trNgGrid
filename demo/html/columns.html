<div class="row">
    <div class="panel panel-primary">
        <div class="panel-heading">
            Field Selection
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-7">
                    <p>
                        One of the most common scenarios is to provide the field names yourself, stopping the grid from auto discovering the columns.
                        One way to achieve that is by providing the list of columns in the table definition, inside a <em>fields</em> attribute.
                        This list can be provided as verbatim, or as a variable.
                    </p>
                    <p>
                        This alwo works for nested objects and arrays.
                    </p>

                    <pre id="trNgGrid_Sample_Columns_Manual_Fields">
                </pre>
                </div>
                <div class="col-md-5" project-markup-to="#trNgGrid_Sample_Columns_Manual_Fields" ng-controller="TrNgGridDemo.TestController" ng-init="generateItems(3, null, true)">
<table tr-ng-grid items="myItems" fields="['id','address.last']"></table>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-primary">
        <div class="panel-heading">
            Column Options
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-7">
                    <p>
                        Column options can be provided by setting up the <em>field-name</em> attribute on the <em>&lt;TH&gt;</em> elements that you'll have to include in the markup of a single <em>&lt;TR&gt;</em> element, part of <em>&lt;THEAD&gt;</em>.<br />
                        When the <em>fields</em> property is not present, the field-bound <em>TH</em> elements will act as the selection of fields that will be displayed.
                    </p>
                    <p>
                        Once the <em>field-name</em> was set, a range of options can tweak the behavior and appearance of the column. You can
                        <ul>
                            <li>Provide the display name for the header (<em>display-name</em>)</li>
                            <li>Turn sorting on/off (<em>enable-sorting</em>)</li>
                            <li>Turn column filtering on/off (<em>enable-filtering</em>)</li>
                            <li>Set the width or height of the column cells, in any measurement unit you want (<em>cell-width/cell-height</em>)</li>
                            <li>Specify the alignment for the data cells (<em>display-align="center|left|right"</em>) </li>
                            <li>
                                Specify the display format (<em>display-format</em>)
                                <ul>
                                    <li>By default the format is interpreted as an angular filter (e.g. display-format="number:2") </li>
                                    <li>You may also specify a method to be called (e.g display-format=".toShortDateTime()"). The function must be present on the field type.</li>
                                </ul>
                            </li>
                            <li>
                                Don't forget the <em>field-name</em> attribute. It's the minimum requirement for column customization.
                            </li>
                        </ul>
                    </p>

                    <pre id="trNgGrid_Sample_Columns_Simple_Definition">
                     </pre>
                </div>
                <div class="col-md-5">
                    <div project-markup-to="#trNgGrid_Sample_Columns_Simple_Definition" ng-controller="TrNgGridDemo.TestController" ng-init="generateItems(10, null, true);">
<table tr-ng-grid items="myItems">
    <thead>
        <tr>
            <th field-name="id" display-name="Employee No" enable-filtering="false" enable-sorting="false" cell-width="10em" display-align="right" />
            <th field-name="address.last" display-name="Last Addr" display-format="uppercase" />
            <th field-name="address.prev[0].address" display-name="First Addr" display-format="uppercase" />
            <th field-name="address.prev.length" display-name="Known Addr Count" display-align="center" />
        </tr>
    </thead>
</table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="panel panel-primary">
        <div class="panel-heading">
            Computed Fields
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-7">
                    <p>
                        There is an easy way of adding computed fields into the displayed items, without polluting the original data items, and without losing the filtering and sorting features.
                    </p>

                    <pre id="trNgGrid_Sample_Columns_Computed_Field">
                    </pre>
                    <p>
                        Essentially we're using a custom angular js filter, but we're asking the grid to pass the <em>gridItem</em> as a parameter (This is the item bound to the row).
                        Do keep in mind that the first parameter will always be the value that gets filtered, but because the field doesn't exist on the entity, its value is <em>undefined</em> hence it needs to be ignored.

                        <pre>
angular.module(...)
.filter("testComputedField", function () {
    return function (fieldValueUnused, item) {
        return item.id + " / " + item.name;
    };
});
                        </pre>
                    </p>
                    <p class="text-warning">Ensure the <em>field-name</em> you use in the column definition for computed fields doesn't exist as a field on the data items, otherwise you'll confuse the sorting algorithm.</p>

                </div>
                <div class="col-md-5" project-markup-to="#trNgGrid_Sample_Columns_Computed_Field" ng-controller="TrNgGridDemo.TestController" ng-init="generateItems(8)">
<table tr-ng-grid items="myItems">
    <thead>
        <tr>
            <th field-name="id" />
            <th field-name="name" />
            <th field-name="computedField" display-name="Computed Field" display-format="testComputedField:gridItem" />
        </tr>
    </thead>
</table>
                </div>
            </div>
        </div>
    </div>

    <div class="panel panel-primary">
        <div class="panel-heading">
            Custom Columns
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-7">
                    <p>
                        Extra columns can be added in the body, even without defining the header.<br />
                        Tapping into the currently bound row item can be done through the <em>gridItem</em> scope variable, which points to the actual data item, and <em>gridDisplayItem</em>, which points to the formatted item and should only be used for presentation purposes.
                        More details can be found in the <em>Customizations</em> section.
                    </p>

                    <pre id="trNgGrid_Sample_Columns_Extra">
                            </pre>
                </div>
                <div class="col-md-5" project-markup-to="#trNgGrid_Sample_Columns_Extra" ng-controller="TrNgGridDemo.TestController" ng-init="generateItems(4)">
<table tr-ng-grid items="myItems">
    <tbody>
        <tr>
            <td>
                <button class="btn btn-default" ng-click="myItems.splice(myItems.indexOf(gridItem),1)">
                    Remove {{gridDisplayItem.id}}
                </button>
            </td>
        </tr>
    </tbody>
</table>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-primary">
        <div class="panel-heading">
            Custom columns with fields enforced
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-7">
                    <p>
                        As mentioned earlier, the <em>fields</em> property can be used to select the fields that are going to be displayed. In this case, the definition of the columns in the header and the body should be used just for customizing the appearance of these columns.
                    </p>
                    <p>In this example, an extra column is added and will appear in the body. You'll notice that I've slightly changed some options for several field-bound columns, but the customization for the <em>address</em> field is not being used as the <em>fields</em> property doesn't list this one.</p>
                    <pre id="trNgGrid_fields_custom_columns_bug_1">
                    </pre>
                </div>
                <div class="col-md-5" project-markup-to="#trNgGrid_fields_custom_columns_bug_1" ng-controller="TrNgGridDemo.TestController" ng-init="generateItems(5)">
Selected Items: {{mySelectedItems.length}}
<table tr-ng-grid
        selected-items="mySelectedItems"
        items="myItems"
        fields="['id','name']"
        selection-mode="SingleRow">
    <thead>
        <tr>
            <th field-name="id" enable-sorting="false"></th>
            <th field-name="address" display-align="right"></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <div>
                    <!--You can stop the click event to bubble up and mess up the selection set by calling $event.stopPropagation() -->
                    <!--alert is a method on the scope which calls $window.alert-->
                    <button class="btn btn-default" ng-click="alert('You clicked on ' + gridItem.id);$event.stopPropagation();">
                        Display {{gridDisplayItem.name}}
                    </button>
                </div>
            </td>
        </tr>
    </tbody>
</table>
                </div>
            </div>
            <hr />
            <div class="row">
                <div class="col-md-7">
                    <p>
                        Adding a header for the custom column should also work.
                    </p>
                    <pre id="trNgGrid_fields_custom_columns_bug_2">
                    </pre>
                    <p>
                        In this example I'm also watching for a change in the data-bound selection array.
                    </p>
                    <pre>
$scope.mySelectedItems=[];
$scope.alertOnSelectionChange = function(){
    $scope.$watch("mySelectedItems.length", function(newLength){
        if (newLength > 0) {
            $window.alert("The selection now contains " + newLength + " items");
        }
    });
};
                    </pre>
                </div>
                <div class="col-md-5" project-markup-to="#trNgGrid_fields_custom_columns_bug_2" ng-controller="TrNgGridDemo.TestController" ng-init="generateItems(15);">
<div ng-init="alertOnSelectionChange();">
    <table tr-ng-grid
            items="myItems"
            selected-items="mySelectedItems"
            fields="['id','name']">
        <thead>
            <tr>
                <th>
                    <div class="tr-ng-title">
                        Header
                    </div>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <div>
                        Item {{gridDisplayItem.id}}
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
                </div>
            </div>
            <hr />
            <div class="row">
                <div class="col-md-7">
                    <p>
                        The <em>fields</em> property is enforcing the order of the field columns, but non-field-bound custom columns cannot be positioned, even when the header contains column customizations for some of the fields.
                        The custom columns will always appear at the end.
                        This only happens when the <em>fields</em> property is being used.
                    </p>
                    <pre id="trNgGrid_fields_custom_columns_bug_3">
                    </pre>
                </div>
                <div class="col-md-5" project-markup-to="#trNgGrid_fields_custom_columns_bug_3" ng-controller="TrNgGridDemo.TestController" ng-init="generateItems(10)">
<table tr-ng-grid
        items="myItems"
        fields="['name', 'id']">
    <thead>
        <tr>
            <th field-name="id">
            </th>
            <th>
                <div class="tr-ng-title">
                    Header
                </div>
            </th>
            <th field-name="name">
            </th>
            <th field-name="address">
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <div>
                    Item {{gridDisplayItem.id}}
                </div>
            </td>
        </tr>
    </tbody>
</table>
                </div>
            </div>
        </div>
    </div>
    
    <div class="panel panel-primary">
        <div class="panel-heading">
            External Learning Resources
        </div>
        <div class="panel-body">
            <ul>
                <li><a href="https://force201.wordpress.com/2014/08/23/cool-data-tables-using-restresource-angularjs-and-trnggrid/" target="_blank">Cool data tables using @RestResource, AngularJS and trNgGrid</a></li>
            </ul>
        </div>
    </div>    

</div>
